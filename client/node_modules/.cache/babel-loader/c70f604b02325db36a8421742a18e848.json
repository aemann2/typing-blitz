{"ast":null,"code":"var _jsxFileName = \"/Users/adammann/Desktop/Projects/Portfolio/typing-blitz/client/src/components/timer/Timer.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useRef, useEffect } from 'react';\nimport classes from './css/Timer.module.scss';\nimport Timer from 'react-compound-timer';\nimport { ScoreContext } from '../../context/ScoreContext';\nimport { WordsContext } from '../../context/WordsContext';\nimport { GameStateContext } from '../../context/GameStateContext';\nimport { motion } from 'framer-motion';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst timerVariants = {\n  hidden: {\n    y: '-100vh'\n  },\n  show: {\n    y: 1,\n    transition: {\n      type: 'tween',\n      duration: 1.2\n    }\n  }\n};\n\nconst Countdown = () => {\n  _s();\n\n  const {\n    score,\n    setScore,\n    setDbData\n  } = useContext(ScoreContext);\n  const {\n    setSubstring,\n    setToHighlight\n  } = useContext(WordsContext);\n  const {\n    isTimeOut,\n    setIsTimeOut,\n    setShowPopup\n  } = useContext(GameStateContext);\n  const button = useRef(null);\n  const timer = useRef(null);\n\n  async function postData() {\n    try {\n      await axios.post('/api/v1/scores', {\n        player: 'TST2',\n        score: score\n      });\n      console.log(score);\n      setScore(0);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async function getData() {\n    try {\n      const res = await axios.get('/api/v1/scores');\n      console.log(res.data.data);\n      setDbData(res.data.data);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  useEffect(() => {\n    if (button.current) {\n      button.current.focus();\n    }\n  }, [isTimeOut]);\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    variants: timerVariants,\n    initial: \"hidden\",\n    animate: \"show\",\n    children: /*#__PURE__*/_jsxDEV(Timer // initialTime={30000}\n    , {\n      initialTime: 5000,\n      ref: timer,\n      startImmediately: false,\n      lastUnit: \"s\",\n      direction: \"backward\",\n      timeToUpdate: 100,\n      checkpoints: [{\n        time: 0,\n        callback: () => {\n          getData();\n          setIsTimeOut(true);\n          setShowPopup(true);\n        }\n      }],\n      children: ({\n        start,\n        reset\n      }) => /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: timer.current && timer.current.getTime() > 10000 ? classes.timer : classes.timerLow,\n          children: /*#__PURE__*/_jsxDEV(Timer.Seconds, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: isTimeOut && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: classes.timerBtn,\n            ref: button,\n            onClick: () => {\n              // Resetting the timer and the game state //\n              postData();\n              reset();\n              start();\n              setIsTimeOut(false);\n              setSubstring('');\n              setToHighlight('');\n            },\n            type: \"button\",\n            children: \"Start\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Countdown, \"029hJKECySg8Aq8bQFe6qOoQhX0=\");\n\n_c = Countdown;\nexport default Countdown;\n\nvar _c;\n\n$RefreshReg$(_c, \"Countdown\");","map":{"version":3,"sources":["/Users/adammann/Desktop/Projects/Portfolio/typing-blitz/client/src/components/timer/Timer.js"],"names":["useContext","useRef","useEffect","classes","Timer","ScoreContext","WordsContext","GameStateContext","motion","axios","timerVariants","hidden","y","show","transition","type","duration","Countdown","score","setScore","setDbData","setSubstring","setToHighlight","isTimeOut","setIsTimeOut","setShowPopup","button","timer","postData","post","player","console","log","error","getData","res","get","data","current","focus","time","callback","start","reset","getTime","timerLow","timerBtn"],"mappings":"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","sourcesContent":["import { useContext, useRef, useEffect } from 'react';\nimport classes from './css/Timer.module.scss';\nimport Timer from 'react-compound-timer';\nimport { ScoreContext } from '../../context/ScoreContext';\nimport { WordsContext } from '../../context/WordsContext';\nimport { GameStateContext } from '../../context/GameStateContext';\nimport { motion } from 'framer-motion';\nimport axios from 'axios';\n\nconst timerVariants = {\n\thidden: {\n\t\ty: '-100vh',\n\t},\n\tshow: {\n\t\ty: 1,\n\t\ttransition: {\n\t\t\ttype: 'tween',\n\t\t\tduration: 1.2,\n\t\t},\n\t},\n};\n\nconst Countdown = () => {\n\tconst { score, setScore, setDbData } = useContext(ScoreContext);\n\tconst { setSubstring, setToHighlight } = useContext(WordsContext);\n\tconst { isTimeOut, setIsTimeOut, setShowPopup } =\n\t\tuseContext(GameStateContext);\n\n\tconst button = useRef(null);\n\tconst timer = useRef(null);\n\n\tasync function postData() {\n\t\ttry {\n\t\t\tawait axios.post('/api/v1/scores', {\n\t\t\t\tplayer: 'TST2',\n\t\t\t\tscore: score,\n\t\t\t});\n\t\t\tconsole.log(score);\n\t\t\tsetScore(0);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t}\n\n\tasync function getData() {\n\t\ttry {\n\t\t\tconst res = await axios.get('/api/v1/scores');\n\t\t\tconsole.log(res.data.data);\n\t\t\tsetDbData(res.data.data);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tif (button.current) {\n\t\t\tbutton.current.focus();\n\t\t}\n\t}, [isTimeOut]);\n\n\treturn (\n\t\t<motion.div variants={timerVariants} initial='hidden' animate='show'>\n\t\t\t<Timer\n\t\t\t\t// initialTime={30000}\n\t\t\t\tinitialTime={5000}\n\t\t\t\tref={timer}\n\t\t\t\tstartImmediately={false}\n\t\t\t\tlastUnit='s'\n\t\t\t\tdirection='backward'\n\t\t\t\ttimeToUpdate={100}\n\t\t\t\tcheckpoints={[\n\t\t\t\t\t{\n\t\t\t\t\t\ttime: 0,\n\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\tgetData();\n\t\t\t\t\t\t\tsetIsTimeOut(true);\n\t\t\t\t\t\t\tsetShowPopup(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t{({ start, reset }) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\ttimer.current && timer.current.getTime() > 10000\n\t\t\t\t\t\t\t\t\t? classes.timer\n\t\t\t\t\t\t\t\t\t: classes.timerLow\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Timer.Seconds />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{isTimeOut && (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={classes.timerBtn}\n\t\t\t\t\t\t\t\t\tref={button}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t// Resetting the timer and the game state //\n\t\t\t\t\t\t\t\t\t\tpostData();\n\t\t\t\t\t\t\t\t\t\treset();\n\t\t\t\t\t\t\t\t\t\tstart();\n\t\t\t\t\t\t\t\t\t\tsetIsTimeOut(false);\n\t\t\t\t\t\t\t\t\t\tsetSubstring('');\n\t\t\t\t\t\t\t\t\t\tsetToHighlight('');\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tStart\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</Timer>\n\t\t</motion.div>\n\t);\n};\n\nexport default Countdown;\n"]},"metadata":{},"sourceType":"module"}