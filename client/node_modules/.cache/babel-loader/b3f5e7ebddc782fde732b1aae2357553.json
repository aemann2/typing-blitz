{"ast":null,"code":"var _jsxFileName = \"/Users/adammann/Desktop/Projects/Portfolio/typing-blitz/client/src/components/popup/Popup.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useRef, useEffect } from 'react';\nimport { WordsContext } from '../../context/WordsContext';\nimport { GameStateContext } from '../../context/GameStateContext';\nimport { ScoreContext } from '../../context/ScoreContext';\nimport classes from './css/Popup.module.scss';\nimport Button from 'react-bootstrap/Button';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst backdropVariants = {\n  visible: {\n    opacity: 1\n  },\n  hidden: {\n    opacity: 0\n  },\n  exit: {\n    opacity: 1\n  }\n};\n\nconst Popup = () => {\n  _s();\n\n  const {\n    showPopup,\n    setShowPopup\n  } = useContext(GameStateContext);\n  const {\n    score,\n    setScore,\n    dbData,\n    setDbData\n  } = useContext(ScoreContext);\n  const {\n    currentWord,\n    wordArray,\n    setCurrentWord\n  } = useContext(WordsContext);\n  const button = useRef(null);\n\n  const handleClose = () => {\n    setShowPopup(false);\n    const wordIndex = wordArray.indexOf(currentWord);\n    setCurrentWord(wordArray[wordIndex + 1]);\n    setScore(0);\n  };\n\n  useEffect(() => {\n    if (button.current) {\n      button.current.focus();\n    }\n\n    async function testPost() {\n      try {\n        await axios.post('/api/v1/scores', {\n          player: 'TST2',\n          score: score\n        });\n        const res2 = await axios.get('/api/v1/scores');\n        console.log(res2.data.data);\n        setDbData(res2.data.data);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    if (showPopup) {\n      testPost();\n    }\n  }, [setDbData]);\n  return /*#__PURE__*/_jsxDEV(AnimatePresence, {\n    exitBeforeEnter: true,\n    children: showPopup &&\n    /*#__PURE__*/\n    // this div represents the semi-transparent BG\n    _jsxDEV(motion.div, {\n      className: classes.backdrop,\n      variants: backdropVariants,\n      animate: \"visible\",\n      initial: \"hidden\",\n      exit: {\n        opacity: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(motion.div, {\n        className: classes.modal,\n        initial: {\n          y: '-100vh',\n          opacity: 0\n        },\n        animate: {\n          y: '200px',\n          opacity: 1,\n          transition: {\n            delay: 0.51\n          }\n        },\n        transition: {\n          type: 'spring',\n          stiffness: 200\n        },\n        exit: {\n          y: '-100vh'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Time Up!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Your score is: \", score]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: `Rank: ${dbData.findIndex(entry => entry.score <= score)} out of ${dbData.length}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          ref: button,\n          onClick: handleClose,\n          children: \"Play Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Popup, \"MgV4CMJf0VxH1IYHmeTDE2+yKQI=\");\n\n_c = Popup;\nexport default Popup;\n\nvar _c;\n\n$RefreshReg$(_c, \"Popup\");","map":{"version":3,"sources":["/Users/adammann/Desktop/Projects/Portfolio/typing-blitz/client/src/components/popup/Popup.js"],"names":["useContext","useRef","useEffect","WordsContext","GameStateContext","ScoreContext","classes","Button","motion","AnimatePresence","axios","backdropVariants","visible","opacity","hidden","exit","Popup","showPopup","setShowPopup","score","setScore","dbData","setDbData","currentWord","wordArray","setCurrentWord","button","handleClose","wordIndex","indexOf","current","focus","testPost","post","player","res2","get","console","log","data","error","backdrop","modal","y","transition","delay","type","stiffness","findIndex","entry","length"],"mappings":"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","sourcesContent":["import { useContext, useRef, useEffect } from 'react';\nimport { WordsContext } from '../../context/WordsContext';\nimport { GameStateContext } from '../../context/GameStateContext';\nimport { ScoreContext } from '../../context/ScoreContext';\nimport classes from './css/Popup.module.scss';\nimport Button from 'react-bootstrap/Button';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport axios from 'axios';\n\nconst backdropVariants = {\n\tvisible: { opacity: 1 },\n\thidden: { opacity: 0 },\n\texit: { opacity: 1 },\n};\n\nconst Popup = () => {\n\tconst { showPopup, setShowPopup } = useContext(GameStateContext);\n\tconst { score, setScore, dbData, setDbData } = useContext(ScoreContext);\n\tconst { currentWord, wordArray, setCurrentWord } = useContext(WordsContext);\n\n\tconst button = useRef(null);\n\n\tconst handleClose = () => {\n\t\tsetShowPopup(false);\n\t\tconst wordIndex = wordArray.indexOf(currentWord);\n\t\tsetCurrentWord(wordArray[wordIndex + 1]);\n\t\tsetScore(0);\n\t};\n\n\tuseEffect(() => {\n\t\tif (button.current) {\n\t\t\tbutton.current.focus();\n\t\t}\n\n\t\tasync function testPost() {\n\t\t\ttry {\n\t\t\t\tawait axios.post('/api/v1/scores', {\n\t\t\t\t\tplayer: 'TST2',\n\t\t\t\t\tscore: score,\n\t\t\t\t});\n\t\t\t\tconst res2 = await axios.get('/api/v1/scores');\n\t\t\t\tconsole.log(res2.data.data);\n\t\t\t\tsetDbData(res2.data.data);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t}\n\n\t\tif (showPopup) {\n\t\t\ttestPost();\n\t\t}\n\t}, [setDbData]);\n\n\treturn (\n\t\t<AnimatePresence exitBeforeEnter>\n\t\t\t{showPopup && (\n\t\t\t\t// this div represents the semi-transparent BG\n\t\t\t\t<motion.div\n\t\t\t\t\tclassName={classes.backdrop}\n\t\t\t\t\tvariants={backdropVariants}\n\t\t\t\t\tanimate='visible'\n\t\t\t\t\tinitial='hidden'\n\t\t\t\t\texit={{ opacity: 0 }}\n\t\t\t\t>\n\t\t\t\t\t{/* the actual modal popup */}\n\t\t\t\t\t<motion.div\n\t\t\t\t\t\tclassName={classes.modal}\n\t\t\t\t\t\tinitial={{ y: '-100vh', opacity: 0 }}\n\t\t\t\t\t\tanimate={{ y: '200px', opacity: 1, transition: { delay: 0.51 } }}\n\t\t\t\t\t\ttransition={{ type: 'spring', stiffness: 200 }}\n\t\t\t\t\t\texit={{ y: '-100vh' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<h2>Time Up!</h2>\n\t\t\t\t\t\t<p>Your score is: {score}</p>\n\t\t\t\t\t\t<p>{`Rank: ${dbData.findIndex(\n\t\t\t\t\t\t\t(entry) => entry.score <= score\n\t\t\t\t\t\t)} out of ${dbData.length}`}</p>\n\t\t\t\t\t\t<Button variant='primary' ref={button} onClick={handleClose}>\n\t\t\t\t\t\t\tPlay Again\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</motion.div>\n\t\t\t\t</motion.div>\n\t\t\t)}\n\t\t</AnimatePresence>\n\t);\n};\n\nexport default Popup;\n"]},"metadata":{},"sourceType":"module"}