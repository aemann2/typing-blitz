{"ast":null,"code":"var _jsxFileName = \"/Users/adammann/Desktop/Projects/Portfolio/typing-blitz/client/src/components/timer/Timer.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useRef, useEffect } from 'react';\nimport classes from './css/Timer.module.scss';\nimport Timer from 'react-compound-timer';\nimport { ScoreContext } from '../../context/ScoreContext';\nimport { WordsContext } from '../../context/WordsContext';\nimport { GameStateContext } from '../../context/GameStateContext';\nimport { motion } from 'framer-motion';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst timerVariants = {\n  hidden: {\n    y: '-100vh'\n  },\n  show: {\n    y: 1,\n    transition: {\n      type: 'tween',\n      duration: 1.2\n    }\n  }\n};\n\nconst Countdown = () => {\n  _s();\n\n  const {\n    setScore,\n    setDbData\n  } = useContext(ScoreContext);\n  const {\n    setSubstring,\n    setToHighlight\n  } = useContext(WordsContext);\n  const {\n    isTimeOut,\n    setIsTimeOut,\n    showRoundBeginModal,\n    showRoundEndModal,\n    setShowRoundEndModal\n  } = useContext(GameStateContext);\n  const button = useRef(null);\n  const timer = useRef(null);\n\n  async function getData() {\n    try {\n      const res = await axios.get('/api/v1/scores');\n      setDbData(res.data.data);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  useEffect(() => {\n    if (showRoundEndModal === false) {\n      button.current.focus();\n    }\n  }, [showRoundEndModal, showRoundBeginModal]);\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    variants: timerVariants,\n    initial: \"hidden\",\n    animate: \"show\",\n    children: /*#__PURE__*/_jsxDEV(Timer, {\n      initialTime: 30000 // initialTime={5000}\n      ,\n      ref: timer,\n      startImmediately: false,\n      lastUnit: \"s\",\n      direction: \"backward\",\n      timeToUpdate: 100,\n      checkpoints: [{\n        time: 0,\n        callback: () => {\n          getData();\n          setIsTimeOut(true);\n          setShowRoundEndModal(true);\n        }\n      }],\n      children: ({\n        start,\n        reset\n      }) => /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: timer.current && timer.current.getTime() > 10000 ? classes.timer : classes.timerLow,\n          children: /*#__PURE__*/_jsxDEV(Timer.Seconds, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: isTimeOut && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: classes.timerBtn,\n            ref: button,\n            onClick: () => {\n              // Resetting the timer and the game state //\n              reset();\n              start();\n              setIsTimeOut(false);\n              setSubstring('');\n              setToHighlight('');\n              setScore(0);\n            },\n            type: \"button\",\n            children: \"Start\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Countdown, \"R9xHUNwrKy21BM4dkLtjLlMa54k=\");\n\n_c = Countdown;\nexport default Countdown;\n\nvar _c;\n\n$RefreshReg$(_c, \"Countdown\");","map":{"version":3,"sources":["/Users/adammann/Desktop/Projects/Portfolio/typing-blitz/client/src/components/timer/Timer.js"],"names":["useContext","useRef","useEffect","classes","Timer","ScoreContext","WordsContext","GameStateContext","motion","axios","timerVariants","hidden","y","show","transition","type","duration","Countdown","setScore","setDbData","setSubstring","setToHighlight","isTimeOut","setIsTimeOut","showRoundBeginModal","showRoundEndModal","setShowRoundEndModal","button","timer","getData","res","get","data","error","console","log","current","focus","time","callback","start","reset","getTime","timerLow","timerBtn"],"mappings":"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","sourcesContent":["import { useContext, useRef, useEffect } from 'react';\nimport classes from './css/Timer.module.scss';\nimport Timer from 'react-compound-timer';\nimport { ScoreContext } from '../../context/ScoreContext';\nimport { WordsContext } from '../../context/WordsContext';\nimport { GameStateContext } from '../../context/GameStateContext';\nimport { motion } from 'framer-motion';\nimport axios from 'axios';\n\nconst timerVariants = {\n\thidden: {\n\t\ty: '-100vh',\n\t},\n\tshow: {\n\t\ty: 1,\n\t\ttransition: {\n\t\t\ttype: 'tween',\n\t\t\tduration: 1.2,\n\t\t},\n\t},\n};\n\nconst Countdown = () => {\n\tconst { setScore, setDbData } = useContext(ScoreContext);\n\tconst { setSubstring, setToHighlight } = useContext(WordsContext);\n\tconst {\n\t\tisTimeOut,\n\t\tsetIsTimeOut,\n\t\tshowRoundBeginModal,\n\t\tshowRoundEndModal,\n\t\tsetShowRoundEndModal,\n\t} = useContext(GameStateContext);\n\n\tconst button = useRef(null);\n\tconst timer = useRef(null);\n\n\tasync function getData() {\n\t\ttry {\n\t\t\tconst res = await axios.get('/api/v1/scores');\n\t\t\tsetDbData(res.data.data);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tif (showRoundEndModal === false) {\n\t\t\tbutton.current.focus();\n\t\t}\n\t}, [showRoundEndModal, showRoundBeginModal]);\n\n\treturn (\n\t\t<motion.div variants={timerVariants} initial='hidden' animate='show'>\n\t\t\t<Timer\n\t\t\t\tinitialTime={30000}\n\t\t\t\t// initialTime={5000}\n\t\t\t\tref={timer}\n\t\t\t\tstartImmediately={false}\n\t\t\t\tlastUnit='s'\n\t\t\t\tdirection='backward'\n\t\t\t\ttimeToUpdate={100}\n\t\t\t\tcheckpoints={[\n\t\t\t\t\t{\n\t\t\t\t\t\ttime: 0,\n\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\tgetData();\n\t\t\t\t\t\t\tsetIsTimeOut(true);\n\t\t\t\t\t\t\tsetShowRoundEndModal(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t{({ start, reset }) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\ttimer.current && timer.current.getTime() > 10000\n\t\t\t\t\t\t\t\t\t? classes.timer\n\t\t\t\t\t\t\t\t\t: classes.timerLow\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Timer.Seconds />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{isTimeOut && (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={classes.timerBtn}\n\t\t\t\t\t\t\t\t\tref={button}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t// Resetting the timer and the game state //\n\t\t\t\t\t\t\t\t\t\treset();\n\t\t\t\t\t\t\t\t\t\tstart();\n\t\t\t\t\t\t\t\t\t\tsetIsTimeOut(false);\n\t\t\t\t\t\t\t\t\t\tsetSubstring('');\n\t\t\t\t\t\t\t\t\t\tsetToHighlight('');\n\t\t\t\t\t\t\t\t\t\tsetScore(0);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tStart\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</Timer>\n\t\t</motion.div>\n\t);\n};\n\nexport default Countdown;\n"]},"metadata":{},"sourceType":"module"}