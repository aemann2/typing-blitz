{"version":3,"file":"react-highlight-regex.esm.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\n\nexport type Props = {\n  text: string;\n  match: RegExp;\n  highlightClassname?: string;\n};\n\nexport function Highlight({ text, match, highlightClassname }: Props) {\n  const $match = useMemo(() => {\n    if (match.flags.includes('g')) return match;\n    return new RegExp(match.source, 'g' + match.flags);\n  }, [match]);\n\n  const matchedPieces = Array.from(text.matchAll($match)).map(([text]) => text);\n  const preservedPieces = text.split($match);\n  const content = [];\n\n  let i = 0;\n  while (matchedPieces.length || preservedPieces.length) {\n    if (preservedPieces.length) {\n      content.push(<span key={i++}>{preservedPieces.shift()}</span>);\n    }\n    if (matchedPieces.length) {\n      content.push(\n        <mark className={highlightClassname} key={i++}>\n          {matchedPieces.shift()}\n        </mark>\n      );\n    }\n  }\n\n  return <>{content}</>;\n}\n"],"names":["Highlight","text","match","highlightClassname","$match","useMemo","flags","includes","RegExp","source","matchedPieces","Array","from","matchAll","map","preservedPieces","split","content","i","length","push","React","key","shift","className"],"mappings":";;SAQgBA;MAAYC,YAAAA;MAAMC,aAAAA;MAAOC,0BAAAA;AACvC,MAAMC,MAAM,GAAGC,OAAO,CAAC;AACrB,QAAIH,KAAK,CAACI,KAAN,CAAYC,QAAZ,CAAqB,GAArB,CAAJ,EAA+B,OAAOL,KAAP;AAC/B,WAAO,IAAIM,MAAJ,CAAWN,KAAK,CAACO,MAAjB,EAAyB,MAAMP,KAAK,CAACI,KAArC,CAAP;AACD,GAHqB,EAGnB,CAACJ,KAAD,CAHmB,CAAtB;AAKA,MAAMQ,aAAa,GAAGC,KAAK,CAACC,IAAN,CAAWX,IAAI,CAACY,QAAL,CAAcT,MAAd,CAAX,EAAkCU,GAAlC,CAAsC;AAAA,QAAEb,IAAF;AAAA,WAAYA,IAAZ;AAAA,GAAtC,CAAtB;AACA,MAAMc,eAAe,GAAGd,IAAI,CAACe,KAAL,CAAWZ,MAAX,CAAxB;AACA,MAAMa,OAAO,GAAG,EAAhB;AAEA,MAAIC,CAAC,GAAG,CAAR;;AACA,SAAOR,aAAa,CAACS,MAAd,IAAwBJ,eAAe,CAACI,MAA/C,EAAuD;AACrD,QAAIJ,eAAe,CAACI,MAApB,EAA4B;AAC1BF,MAAAA,OAAO,CAACG,IAAR,CAAaC,mBAAA,OAAA;AAAMC,QAAAA,GAAG,EAAEJ,CAAC;OAAZ,EAAiBH,eAAe,CAACQ,KAAhB,EAAjB,CAAb;AACD;;AACD,QAAIb,aAAa,CAACS,MAAlB,EAA0B;AACxBF,MAAAA,OAAO,CAACG,IAAR,CACEC,mBAAA,OAAA;AAAMG,QAAAA,SAAS,EAAErB;AAAoBmB,QAAAA,GAAG,EAAEJ,CAAC;OAA3C,EACGR,aAAa,CAACa,KAAd,EADH,CADF;AAKD;AACF;;AAED,SAAOF,mBAAA,eAAA,MAAA,EAAGJ,OAAH,CAAP;AACD;;;;"}